<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>사주팔자 오늘의 운세</title>
  <link rel="stylesheet" href="/style.css" />
</head>
<body>
  <div class="grain"></div>
  <main class="page">
    <header class="hero">
      <p class="eyebrow">Saju • Palja • Today</p>
      <h1>사주팔자 별로 보는 오늘의 운세</h1>
      <p class="subtitle">태어난 순간의 네 기둥을 바탕으로, 오늘의 흐름을 간결하고 현실적으로 읽어드립니다.</p>
      <div class="today" id="todayLabel"></div>
      <div class="theme-toggle">
        <button type="button" class="button-secondary" id="themeToggle">다크 모드</button>
      </div>
    </header>

    <section class="card form-card">
      <h2>내 사주 입력</h2>
      <form id="fortuneForm" class="form">
        <label>
          <span>이름 (선택)</span>
          <input type="text" name="name" placeholder="예: 민수" autocomplete="name" />
        </label>
        <label>
          <span>생년월일</span>
          <input type="text" name="birthDate" placeholder="YYYY-MM-DD" inputmode="numeric" autocomplete="bday" required />
        </label>
        <label>
          <span>출생시간</span>
          <input type="time" name="birthTime" required />
        </label>
        <label>
          <span>성별 (선택)</span>
          <select name="gender">
            <option value="">선택 안 함</option>
            <option value="female">여성</option>
            <option value="male">남성</option>
            <option value="other">기타</option>
          </select>
        </label>
        <label>
          <span>운세 톤</span>
          <select name="tone" required>
            <option value="balanced">담백하고 현실적인 톤</option>
            <option value="warm">따뜻하고 위로하는 톤</option>
            <option value="sharp">날카롭고 직설적인 톤</option>
          </select>
        </label>
        <p class="hint warning" id="birthWarning" role="alert" aria-live="polite"></p>
        <button type="submit">오늘의 운세 보기</button>
        <p class="hint">절기(입춘 기준)를 반영해 연·월주를 계산하지만, 실제 명식과는 오차가 있을 수 있습니다.</p>
      </form>
    </section>

    <section class="results" id="results" aria-live="polite"></section>

    <section class="card info">
      <h2>절기 시각 정확도 테스트</h2>
      <form id="termTestForm" class="form test-form">
        <label>
          <span>연도</span>
          <input type="number" name="testYear" min="1900" max="2100" value="2026" required />
        </label>
        <label>
          <span>절기</span>
          <select name="testTerm" required>
            <option value="sohan">소한</option>
            <option value="ipchun">입춘</option>
            <option value="gyeongchip">경칩</option>
            <option value="cheongmyeong">청명</option>
            <option value="iphwa">입하</option>
            <option value="mangjong">망종</option>
            <option value="soseo">소서</option>
            <option value="ipchu">입추</option>
            <option value="baengno">백로</option>
            <option value="hanro">한로</option>
            <option value="ipdong">입동</option>
            <option value="daeseol">대설</option>
          </select>
        </label>
        <label>
          <span>참고 시각 (KST, 선택)</span>
          <input type="datetime-local" name="referenceTime" />
        </label>
        <button type="submit" class="button-secondary">계산 결과 비교</button>
        <p class="hint">참고 시각을 입력하면 계산 결과와의 차이를 분 단위로 보여줍니다.</p>
      </form>
      <div id="termTestResult" class="test-result"></div>
    </section>

    <section class="card info">
      <h2>이 앱은 어떻게 계산하나요?</h2>
      <ul class="list">
        <li>태양 황경을 계산해 실제 천문 절기 시각을 근사합니다.</li>
        <li>절기(입춘 기준)로 연주·월주, 양력 생년월일로 일주·시주를 계산합니다.</li>
        <li>천간·지지를 오행으로 변환해 기운의 균형을 평가합니다.</li>
        <li>선택한 톤과 카테고리에 맞춰 운세 문장을 세분화합니다.</li>
      </ul>
      <p class="disclaimer">본 결과는 참고용이며, 중요한 결정은 현실적 판단과 함께 해주세요.</p>
    </section>
  </main>

  <script defer src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script defer src="/main.js"></script>
</body>
</html>
